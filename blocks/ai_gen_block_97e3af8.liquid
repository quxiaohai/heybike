{% doc %}
  @prompt
    Create a hero banner section with image and text overlay with these specifications:
    - Separate image uploads for desktop and mobile versions
    - Adjustable desktop height setting (options like small, medium, large, full screen)
    - Adjustable mobile height setting (options like small, medium, large, auto)
    - Content alignment settings: left, center, or right positioning with proper spacing/padding from banner edges
    - Adjustable overlay opacity slider (0-100%) with dark semi-transparent overlay over the image
    - Content structure from top to bottom: subheading text (small text above main heading), main heading (large bold text), countdown timer (displays days, hours, minutes, seconds), description text (paragraph below timer)
    - All text colors are adjustable: separate color pickers for subheading, main heading, countdown timer, and description
    - Countdown timer should be prominent and styled to match the hero banner aesthetic
    - Timer setting to set target date and time for countdown
    - Proper padding around all content so text never touches banner edges
    - Responsive design that works beautifully on all devices
    - Clean, modern styling with good typography hierarchy
    - All text fields are editable in theme customizer
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-hero-banner-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    overflow: hidden;
  }

  .ai-hero-banner-desktop-{{ ai_gen_id }} {
    display: block;
  }

  .ai-hero-banner-mobile-{{ ai_gen_id }} {
    display: none;
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-desktop-{{ ai_gen_id }} {
      display: none;
    }

    .ai-hero-banner-mobile-{{ ai_gen_id }} {
      display: block;
    }
  }

  .ai-hero-banner-{{ ai_gen_id }}--height-small {
    height: 400px;
  }

  .ai-hero-banner-{{ ai_gen_id }}--height-medium {
    height: 550px;
  }

  .ai-hero-banner-{{ ai_gen_id }}--height-large {
    height: 700px;
  }

  .ai-hero-banner-{{ ai_gen_id }}--height-fullscreen {
    height: 100vh;
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-{{ ai_gen_id }}--mobile-small {
      height: 400px;
    }

    .ai-hero-banner-{{ ai_gen_id }}--mobile-medium {
      height: 500px;
    }

    .ai-hero-banner-{{ ai_gen_id }}--mobile-large {
      height: 600px;
    }

    .ai-hero-banner-{{ ai_gen_id }}--mobile-auto {
      height: auto;
      min-height: 400px;
    }
  }

  .ai-hero-banner-image-wrapper-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .ai-hero-banner-image-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-hero-banner-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-hero-banner-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    max-width: 500px;
    max-height: 500px;
  }

  .ai-hero-banner-overlay-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, {{ block.settings.overlay_opacity | divided_by: 100.0 }});
    z-index: 1;
  }

  .ai-hero-banner-content-{{ ai_gen_id }} {
    position: relative;
    z-index: 2;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 40px;
    max-width: {{ settings.page_width }}px;
    margin: 0 auto;
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-content-{{ ai_gen_id }} {
      padding: 30px 20px;
    }
  }

  .ai-hero-banner-content-{{ ai_gen_id }}--left {
    align-items: flex-start;
    text-align: left;
  }

  .ai-hero-banner-content-{{ ai_gen_id }}--center {
    align-items: center;
    text-align: center;
  }

  .ai-hero-banner-content-{{ ai_gen_id }}--right {
    align-items: flex-end;
    text-align: right;
  }

  .ai-hero-banner-content-inner-{{ ai_gen_id }} {
    max-width: 700px;
  }

  .ai-hero-banner-subheading-{{ ai_gen_id }} {
    font-size: 14px;
    font-weight: 500;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin: 0 0 12px;
    color: {{ block.settings.subheading_color }};
  }

  .ai-hero-banner-heading-{{ ai_gen_id }} {
    font-size: 56px;
    font-weight: 700;
    line-height: 1.1;
    margin: 0 0 24px;
    color: {{ block.settings.heading_color }};
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-heading-{{ ai_gen_id }} {
      font-size: 36px;
      margin: 0 0 20px;
    }
  }

  .ai-hero-banner-countdown-{{ ai_gen_id }} {
    display: flex;
    gap: 20px;
    margin: 0 0 24px;
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-countdown-{{ ai_gen_id }} {
      gap: 12px;
      margin: 0 0 20px;
    }
  }

  .ai-hero-banner-countdown-item-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 80px;
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-countdown-item-{{ ai_gen_id }} {
      min-width: 60px;
    }
  }

  .ai-hero-banner-countdown-number-{{ ai_gen_id }} {
    font-size: 48px;
    font-weight: 700;
    line-height: 1;
    color: {{ block.settings.countdown_color }};
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-countdown-number-{{ ai_gen_id }} {
      font-size: 32px;
    }
  }

  .ai-hero-banner-countdown-label-{{ ai_gen_id }} {
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-top: 8px;
    color: {{ block.settings.countdown_color }};
    opacity: 0.8;
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-countdown-label-{{ ai_gen_id }} {
      font-size: 10px;
      margin-top: 4px;
    }
  }

  .ai-hero-banner-description-{{ ai_gen_id }} {
    font-size: 18px;
    line-height: 1.6;
    margin: 0;
    color: {{ block.settings.description_color }};
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-description-{{ ai_gen_id }} {
      font-size: 16px;
    }
  }

  .ai-hero-banner-empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 20px;
    font-size: 14px;
    color: #666;
    text-align: center;
    pointer-events: none;
    z-index: 3;
  }
{% endstyle %}

<hero-countdown-{{ ai_gen_id }}
  class="ai-hero-banner-{{ ai_gen_id }} ai-hero-banner-{{ ai_gen_id }}--height-{{ block.settings.desktop_height }} ai-hero-banner-{{ ai_gen_id }}--mobile-{{ block.settings.mobile_height }}"
  data-target-date="{{ block.settings.countdown_date }}"
  data-target-time="{{ block.settings.countdown_time }}"
  {{ block.shopify_attributes }}
>
  <div class="ai-hero-banner-image-wrapper-{{ ai_gen_id }} ai-hero-banner-desktop-{{ ai_gen_id }}">
    {% if block.settings.desktop_image %}
      <img
        src="{{ block.settings.desktop_image | image_url: width: 2000 }}"
        alt="{{ block.settings.desktop_image.alt | escape }}"
        loading="lazy"
        width="{{ block.settings.desktop_image.width }}"
        height="{{ block.settings.desktop_image.height }}"
        class="ai-hero-banner-image-{{ ai_gen_id }}"
      >
    {% else %}
      <div class="ai-hero-banner-placeholder-{{ ai_gen_id }}">
        {{ 'hero-apparel-1' | placeholder_svg_tag }}
      </div>
    {% endif %}
  </div>

  <div class="ai-hero-banner-image-wrapper-{{ ai_gen_id }} ai-hero-banner-mobile-{{ ai_gen_id }}">
    {% if block.settings.mobile_image %}
      <img
        src="{{ block.settings.mobile_image | image_url: width: 1000 }}"
        alt="{{ block.settings.mobile_image.alt | escape }}"
        loading="lazy"
        width="{{ block.settings.mobile_image.width }}"
        height="{{ block.settings.mobile_image.height }}"
        class="ai-hero-banner-image-{{ ai_gen_id }}"
      >
    {% elsif block.settings.desktop_image %}
      <img
        src="{{ block.settings.desktop_image | image_url: width: 1000 }}"
        alt="{{ block.settings.desktop_image.alt | escape }}"
        loading="lazy"
        width="{{ block.settings.desktop_image.width }}"
        height="{{ block.settings.desktop_image.height }}"
        class="ai-hero-banner-image-{{ ai_gen_id }}"
      >
    {% else %}
      <div class="ai-hero-banner-placeholder-{{ ai_gen_id }}">
        {{ 'hero-apparel-1' | placeholder_svg_tag }}
      </div>
    {% endif %}
  </div>

  <div class="ai-hero-banner-overlay-{{ ai_gen_id }}"></div>

  <div class="ai-hero-banner-content-{{ ai_gen_id }} ai-hero-banner-content-{{ ai_gen_id }}--{{ block.settings.content_alignment }}">
    <div class="ai-hero-banner-content-inner-{{ ai_gen_id }}">
      {% if block.settings.subheading != blank %}
        <div class="ai-hero-banner-subheading-{{ ai_gen_id }}">{{ block.settings.subheading }}</div>
      {% endif %}

      {% if block.settings.heading != blank %}
        <h1 class="ai-hero-banner-heading-{{ ai_gen_id }}">{{ block.settings.heading }}</h1>
      {% endif %}

      <div class="ai-hero-banner-countdown-{{ ai_gen_id }}">
        <div class="ai-hero-banner-countdown-item-{{ ai_gen_id }}">
          <div class="ai-hero-banner-countdown-number-{{ ai_gen_id }}" data-countdown-days>00</div>
          <div class="ai-hero-banner-countdown-label-{{ ai_gen_id }}">Days</div>
        </div>
        <div class="ai-hero-banner-countdown-item-{{ ai_gen_id }}">
          <div class="ai-hero-banner-countdown-number-{{ ai_gen_id }}" data-countdown-hours>00</div>
          <div class="ai-hero-banner-countdown-label-{{ ai_gen_id }}">Hours</div>
        </div>
        <div class="ai-hero-banner-countdown-item-{{ ai_gen_id }}">
          <div class="ai-hero-banner-countdown-number-{{ ai_gen_id }}" data-countdown-minutes>00</div>
          <div class="ai-hero-banner-countdown-label-{{ ai_gen_id }}">Minutes</div>
        </div>
        <div class="ai-hero-banner-countdown-item-{{ ai_gen_id }}">
          <div class="ai-hero-banner-countdown-number-{{ ai_gen_id }}" data-countdown-seconds>00</div>
          <div class="ai-hero-banner-countdown-label-{{ ai_gen_id }}">Seconds</div>
        </div>
      </div>

      {% if block.settings.description != blank %}
        <div class="ai-hero-banner-description-{{ ai_gen_id }}">{{ block.settings.description }}</div>
      {% endif %}
    </div>
  </div>

  {% if block.settings.desktop_image == blank %}
    <div class="ai-hero-banner-empty-state-{{ ai_gen_id }}">
      Next, add images for desktop and mobile
    </div>
  {% endif %}
</hero-countdown-{{ ai_gen_id }}>

<script>
  (function() {
    class HeroCountdown{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
        this.targetDate = null;
        this.interval = null;
      }

      connectedCallback() {
        const dateStr = this.dataset.targetDate;
        const timeStr = this.dataset.targetTime;

        if (dateStr && timeStr) {
          this.targetDate = new Date(dateStr + 'T' + timeStr);
          this.updateCountdown();
          this.interval = setInterval(() => this.updateCountdown(), 1000);
        }
      }

      disconnectedCallback() {
        if (this.interval) {
          clearInterval(this.interval);
        }
      }

      updateCountdown() {
        const now = new Date().getTime();
        const distance = this.targetDate.getTime() - now;

        if (distance < 0) {
          this.displayTime(0, 0, 0, 0);
          if (this.interval) {
            clearInterval(this.interval);
          }
          return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        this.displayTime(days, hours, minutes, seconds);
      }

      displayTime(days, hours, minutes, seconds) {
        const daysEl = this.querySelector('[data-countdown-days]');
        const hoursEl = this.querySelector('[data-countdown-hours]');
        const minutesEl = this.querySelector('[data-countdown-minutes]');
        const secondsEl = this.querySelector('[data-countdown-seconds]');

        if (daysEl) daysEl.textContent = String(days).padStart(2, '0');
        if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
        if (minutesEl) minutesEl.textContent = String(minutes).padStart(2, '0');
        if (secondsEl) secondsEl.textContent = String(seconds).padStart(2, '0');
      }
    }

    customElements.define('hero-countdown-{{ ai_gen_id }}', HeroCountdown{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Hero countdown banner",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Images"
    },
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile image"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "desktop_height",
      "label": "Desktop height",
      "options": [
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "large",
          "label": "Large"
        },
        {
          "value": "fullscreen",
          "label": "Full screen"
        }
      ],
      "default": "medium"
    },
    {
      "type": "select",
      "id": "mobile_height",
      "label": "Mobile height",
      "options": [
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "large",
          "label": "Large"
        },
        {
          "value": "auto",
          "label": "Auto"
        }
      ],
      "default": "medium"
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "Content alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Overlay opacity",
      "default": 40
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Limited Time Offer"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Summer Sale Ends Soon"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Don't miss out on incredible savings. Shop now before time runs out!</p>"
    },
    {
      "type": "header",
      "content": "Countdown timer"
    },
    {
      "type": "text",
      "id": "countdown_date",
      "label": "Target date",
      "info": "Format: YYYY-MM-DD (e.g., 2025-12-31)",
      "default": "2025-12-31"
    },
    {
      "type": "text",
      "id": "countdown_time",
      "label": "Target time",
      "info": "Format: HH:MM:SS (e.g., 23:59:59)",
      "default": "23:59:59"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "countdown_color",
      "label": "Countdown timer",
      "default": "#ffdb00"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description",
      "default": "#ffffff"
    }
  ],
  "presets": [
    {
      "name": "Hero countdown banner"
    }
  ]
}
{% endschema %}
