{% doc %}
  @prompt
    Create a hero banner section with image and text overlay with these specifications:
    - Separate image uploads for desktop and mobile versions - use picture element with source tags for responsive images
    - Desktop height options: adapt to image (natural height), or custom pixel height with number input field
    - Mobile height options: adapt to image (natural height), or custom pixel height with number input field
    - Height mode toggle: choose between "adapt to image" or "custom height"
    - CRITICAL: Use single content block with CSS media queries for responsive behavior - do NOT duplicate content for desktop and mobile
    - Desktop controls applied via CSS at desktop breakpoint: horizontal alignment (left, center, right), vertical alignment (top, middle, bottom), content padding (top, right, bottom, left) with number inputs, content width (small 400px, medium 600px, large 800px, or custom), text alignment (left, center, right)
    - Mobile controls applied via CSS at mobile breakpoint: horizontal alignment (left, center, right), vertical alignment (top, middle, bottom), content padding (top, right, bottom, left) with number inputs, content width (small 280px, medium 340px, large 400px, or custom), text alignment (left, center, right)
    - Font sizes controlled by CSS media queries: Desktop - subheading (default 16px), main heading (default 48px), countdown timer (default 32px), description (default 18px). Mobile - subheading (default 14px), main heading (default 32px), countdown timer (default 24px), description (default 16px)
    - Text alignment controls ALL content including countdown timer - when center is selected, timer is centered
    - Adjustable overlay opacity slider (0-100%) with dark semi-transparent overlay over the image
    - Content structure: subheading text, main heading, countdown timer (displays days, hours, minutes, seconds), description text
    - All text colors adjustable: separate color pickers for subheading, main heading, countdown timer, and description
    - Timer setting to set target date and time for countdown
    - When custom height selected, image covers container using object-fit cover
    - When adapt to image selected, show full image at natural aspect ratio
    - Responsive design with single content block styled differently per device
    - Clean, modern styling with good typography hierarchy
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-hero-banner-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    overflow: hidden;
  }

  .ai-hero-banner-container-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    {% if block.settings.desktop_height_mode == 'custom' %}
      height: {{ block.settings.desktop_custom_height }}px;
    {% endif %}
  }

  .ai-hero-banner-picture-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    display: block;
  }

  .ai-hero-banner-image-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    display: block;
    {% if block.settings.desktop_height_mode == 'custom' %}
      object-fit: cover;
    {% else %}
      object-fit: contain;
    {% endif %}
  }

  .ai-hero-banner-overlay-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, {{ block.settings.overlay_opacity | divided_by: 100.0 }});
    pointer-events: none;
  }

  .ai-hero-banner-content-wrapper-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    {% if block.settings.desktop_horizontal_align == 'left' %}
      justify-content: flex-start;
    {% elsif block.settings.desktop_horizontal_align == 'center' %}
      justify-content: center;
    {% else %}
      justify-content: flex-end;
    {% endif %}
    {% if block.settings.desktop_vertical_align == 'top' %}
      align-items: flex-start;
    {% elsif block.settings.desktop_vertical_align == 'middle' %}
      align-items: center;
    {% else %}
      align-items: flex-end;
    {% endif %}
    padding-top: {{ block.settings.desktop_padding_top }}px;
    padding-right: {{ block.settings.desktop_padding_right }}px;
    padding-bottom: {{ block.settings.desktop_padding_bottom }}px;
    padding-left: {{ block.settings.desktop_padding_left }}px;
  }

  .ai-hero-banner-content-{{ ai_gen_id }} {
    {% if block.settings.desktop_content_width == 'custom' %}
      width: {{ block.settings.desktop_custom_width }}px;
    {% elsif block.settings.desktop_content_width == 'small' %}
      width: 400px;
    {% elsif block.settings.desktop_content_width == 'medium' %}
      width: 600px;
    {% else %}
      width: 800px;
    {% endif %}
    max-width: 100%;
    {% if block.settings.desktop_text_align == 'left' %}
      text-align: left;
    {% elsif block.settings.desktop_text_align == 'center' %}
      text-align: center;
    {% else %}
      text-align: right;
    {% endif %}
  }

  .ai-hero-banner-subheading-{{ ai_gen_id }} {
    color: {{ block.settings.subheading_color }};
    font-size: {{ block.settings.desktop_subheading_size }}px;
    margin: 0 0 12px;
    line-height: 1.4;
  }

  .ai-hero-banner-heading-{{ ai_gen_id }} {
    color: {{ block.settings.heading_color }};
    font-size: {{ block.settings.desktop_heading_size }}px;
    margin: 0 0 20px;
    line-height: 1.2;
    font-weight: 700;
  }

  .ai-hero-banner-countdown-{{ ai_gen_id }} {
    display: flex;
    gap: 16px;
    margin: 0 0 20px;
    {% if block.settings.desktop_text_align == 'left' %}
      justify-content: flex-start;
    {% elsif block.settings.desktop_text_align == 'center' %}
      justify-content: center;
    {% else %}
      justify-content: flex-end;
    {% endif %}
  }

  .ai-hero-banner-countdown-item-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .ai-hero-banner-countdown-value-{{ ai_gen_id }} {
    color: {{ block.settings.countdown_color }};
    font-size: {{ block.settings.desktop_countdown_size }}px;
    font-weight: 700;
    line-height: 1;
  }

  .ai-hero-banner-countdown-label-{{ ai_gen_id }} {
    color: {{ block.settings.countdown_color }};
    font-size: 12px;
    margin-top: 4px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .ai-hero-banner-description-{{ ai_gen_id }} {
    color: {{ block.settings.description_color }};
    font-size: {{ block.settings.desktop_description_size }}px;
    margin: 0;
    line-height: 1.6;
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-container-{{ ai_gen_id }} {
      {% if block.settings.mobile_height_mode == 'custom' %}
        height: {{ block.settings.mobile_custom_height }}px;
      {% else %}
        height: auto;
      {% endif %}
    }

    .ai-hero-banner-image-{{ ai_gen_id }} {
      {% if block.settings.mobile_height_mode == 'custom' %}
        object-fit: cover;
      {% else %}
        object-fit: contain;
      {% endif %}
    }

    .ai-hero-banner-content-wrapper-{{ ai_gen_id }} {
      {% if block.settings.mobile_horizontal_align == 'left' %}
        justify-content: flex-start;
      {% elsif block.settings.mobile_horizontal_align == 'center' %}
        justify-content: center;
      {% else %}
        justify-content: flex-end;
      {% endif %}
      {% if block.settings.mobile_vertical_align == 'top' %}
        align-items: flex-start;
      {% elsif block.settings.mobile_vertical_align == 'middle' %}
        align-items: center;
      {% else %}
        align-items: flex-end;
      {% endif %}
      padding-top: {{ block.settings.mobile_padding_top }}px;
      padding-right: {{ block.settings.mobile_padding_right }}px;
      padding-bottom: {{ block.settings.mobile_padding_bottom }}px;
      padding-left: {{ block.settings.mobile_padding_left }}px;
    }

    .ai-hero-banner-content-{{ ai_gen_id }} {
      {% if block.settings.mobile_content_width == 'custom' %}
        width: {{ block.settings.mobile_custom_width }}px;
      {% elsif block.settings.mobile_content_width == 'small' %}
        width: 280px;
      {% elsif block.settings.mobile_content_width == 'medium' %}
        width: 340px;
      {% else %}
        width: 400px;
      {% endif %}
      {% if block.settings.mobile_text_align == 'left' %}
        text-align: left;
      {% elsif block.settings.mobile_text_align == 'center' %}
        text-align: center;
      {% else %}
        text-align: right;
      {% endif %}
    }

    .ai-hero-banner-subheading-{{ ai_gen_id }} {
      font-size: {{ block.settings.mobile_subheading_size }}px;
    }

    .ai-hero-banner-heading-{{ ai_gen_id }} {
      font-size: {{ block.settings.mobile_heading_size }}px;
    }

    .ai-hero-banner-countdown-{{ ai_gen_id }} {
      gap: 12px;
      {% if block.settings.mobile_text_align == 'left' %}
        justify-content: flex-start;
      {% elsif block.settings.mobile_text_align == 'center' %}
        justify-content: center;
      {% else %}
        justify-content: flex-end;
      {% endif %}
    }

    .ai-hero-banner-countdown-value-{{ ai_gen_id }} {
      font-size: {{ block.settings.mobile_countdown_size }}px;
    }

    .ai-hero-banner-description-{{ ai_gen_id }} {
      font-size: {{ block.settings.mobile_description_size }}px;
    }
  }
{% endstyle %}

<hero-banner-{{ ai_gen_id }} class="ai-hero-banner-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-hero-banner-container-{{ ai_gen_id }}">
    <picture class="ai-hero-banner-picture-{{ ai_gen_id }}">
      {% if block.settings.mobile_image %}
        <source
          media="(max-width: 749px)"
          srcset="{{ block.settings.mobile_image | image_url: width: 750 }} 750w,
                  {{ block.settings.mobile_image | image_url: width: 1500 }} 1500w"
        >
      {% endif %}
      {% if block.settings.desktop_image %}
        <img
          src="{{ block.settings.desktop_image | image_url: width: 1920 }}"
          srcset="{{ block.settings.desktop_image | image_url: width: 1920 }} 1920w,
                  {{ block.settings.desktop_image | image_url: width: 2560 }} 2560w"
          alt="{{ block.settings.desktop_image.alt | escape }}"
          class="ai-hero-banner-image-{{ ai_gen_id }}"
          loading="eager"
          width="{{ block.settings.desktop_image.width }}"
          height="{{ block.settings.desktop_image.height }}"
        >
      {% else %}
        <div class="ai-hero-banner-image-placeholder-{{ ai_gen_id }}">
          {{ 'hero-apparel-1' | placeholder_svg_tag }}
        </div>
      {% endif %}
    </picture>

    <div class="ai-hero-banner-overlay-{{ ai_gen_id }}"></div>

    <div class="ai-hero-banner-content-wrapper-{{ ai_gen_id }}">
      <div class="ai-hero-banner-content-{{ ai_gen_id }}">
        {% if block.settings.subheading != blank %}
          <div class="ai-hero-banner-subheading-{{ ai_gen_id }}">
            {{ block.settings.subheading }}
          </div>
        {% endif %}

        {% if block.settings.heading != blank %}
          <h1 class="ai-hero-banner-heading-{{ ai_gen_id }}">
            {{ block.settings.heading }}
          </h1>
        {% endif %}

        {% if block.settings.show_countdown %}
          <div class="ai-hero-banner-countdown-{{ ai_gen_id }}" data-countdown-target="{{ block.settings.countdown_target }}">
            <div class="ai-hero-banner-countdown-item-{{ ai_gen_id }}">
              <div class="ai-hero-banner-countdown-value-{{ ai_gen_id }}" data-countdown-days>00</div>
              <div class="ai-hero-banner-countdown-label-{{ ai_gen_id }}">Days</div>
            </div>
            <div class="ai-hero-banner-countdown-item-{{ ai_gen_id }}">
              <div class="ai-hero-banner-countdown-value-{{ ai_gen_id }}" data-countdown-hours>00</div>
              <div class="ai-hero-banner-countdown-label-{{ ai_gen_id }}">Hours</div>
            </div>
            <div class="ai-hero-banner-countdown-item-{{ ai_gen_id }}">
              <div class="ai-hero-banner-countdown-value-{{ ai_gen_id }}" data-countdown-minutes>00</div>
              <div class="ai-hero-banner-countdown-label-{{ ai_gen_id }}">Minutes</div>
            </div>
            <div class="ai-hero-banner-countdown-item-{{ ai_gen_id }}">
              <div class="ai-hero-banner-countdown-value-{{ ai_gen_id }}" data-countdown-seconds>00</div>
              <div class="ai-hero-banner-countdown-label-{{ ai_gen_id }}">Seconds</div>
            </div>
          </div>
        {% endif %}

        {% if block.settings.description != blank %}
          <div class="ai-hero-banner-description-{{ ai_gen_id }}">
            {{ block.settings.description }}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</hero-banner-{{ ai_gen_id }}>

<script>
  (function() {
    class HeroBanner{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
        this.countdown = this.querySelector('.ai-hero-banner-countdown-{{ ai_gen_id }}');
        this.targetDate = null;
        this.interval = null;
      }

      connectedCallback() {
        if (this.countdown) {
          const target = this.countdown.getAttribute('data-countdown-target');
          if (target) {
            this.targetDate = new Date(target).getTime();
            this.updateCountdown();
            this.interval = setInterval(() => this.updateCountdown(), 1000);
          }
        }
      }

      disconnectedCallback() {
        if (this.interval) {
          clearInterval(this.interval);
        }
      }

      updateCountdown() {
        const now = new Date().getTime();
        const distance = this.targetDate - now;

        if (distance < 0) {
          if (this.interval) {
            clearInterval(this.interval);
          }
          this.setCountdownValues(0, 0, 0, 0);
          return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        this.setCountdownValues(days, hours, minutes, seconds);
      }

      setCountdownValues(days, hours, minutes, seconds) {
        const daysEl = this.querySelector('[data-countdown-days]');
        const hoursEl = this.querySelector('[data-countdown-hours]');
        const minutesEl = this.querySelector('[data-countdown-minutes]');
        const secondsEl = this.querySelector('[data-countdown-seconds]');

        if (daysEl) daysEl.textContent = String(days).padStart(2, '0');
        if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
        if (minutesEl) minutesEl.textContent = String(minutes).padStart(2, '0');
        if (secondsEl) secondsEl.textContent = String(seconds).padStart(2, '0');
      }
    }

    customElements.define('hero-banner-{{ ai_gen_id }}', HeroBanner{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Hero banner",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Images"
    },
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile image"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Overlay opacity",
      "default": 30
    },
    {
      "type": "header",
      "content": "Desktop layout"
    },
    {
      "type": "select",
      "id": "desktop_height_mode",
      "label": "Height mode",
      "options": [
        {
          "value": "adapt",
          "label": "Adapt to image"
        },
        {
          "value": "custom",
          "label": "Custom height"
        }
      ],
      "default": "custom"
    },
    {
      "type": "range",
      "id": "desktop_custom_height",
      "min": 300,
      "max": 1000,
      "step": 10,
      "unit": "px",
      "label": "Custom height",
      "default": 600
    },
    {
      "type": "select",
      "id": "desktop_horizontal_align",
      "label": "Horizontal alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "desktop_vertical_align",
      "label": "Vertical alignment",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "middle",
          "label": "Middle"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ],
      "default": "middle"
    },
    {
      "type": "select",
      "id": "desktop_text_align",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "desktop_padding_top",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding top",
      "default": 40
    },
    {
      "type": "range",
      "id": "desktop_padding_right",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding right",
      "default": 40
    },
    {
      "type": "range",
      "id": "desktop_padding_bottom",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding bottom",
      "default": 40
    },
    {
      "type": "range",
      "id": "desktop_padding_left",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding left",
      "default": 40
    },
    {
      "type": "select",
      "id": "desktop_content_width",
      "label": "Content width",
      "options": [
        {
          "value": "small",
          "label": "Small (400px)"
        },
        {
          "value": "medium",
          "label": "Medium (600px)"
        },
        {
          "value": "large",
          "label": "Large (800px)"
        },
        {
          "value": "custom",
          "label": "Custom"
        }
      ],
      "default": "medium"
    },
    {
      "type": "range",
      "id": "desktop_custom_width",
      "min": 300,
      "max": 1200,
      "step": 10,
      "unit": "px",
      "label": "Custom width",
      "default": 600
    },
    {
      "type": "header",
      "content": "Mobile layout"
    },
    {
      "type": "select",
      "id": "mobile_height_mode",
      "label": "Height mode",
      "options": [
        {
          "value": "adapt",
          "label": "Adapt to image"
        },
        {
          "value": "custom",
          "label": "Custom height"
        }
      ],
      "default": "custom"
    },
    {
      "type": "range",
      "id": "mobile_custom_height",
      "min": 200,
      "max": 800,
      "step": 10,
      "unit": "px",
      "label": "Custom height",
      "default": 400
    },
    {
      "type": "select",
      "id": "mobile_horizontal_align",
      "label": "Horizontal alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "mobile_vertical_align",
      "label": "Vertical alignment",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "middle",
          "label": "Middle"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ],
      "default": "middle"
    },
    {
      "type": "select",
      "id": "mobile_text_align",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "mobile_padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding top",
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_padding_right",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding right",
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding bottom",
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_padding_left",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding left",
      "default": 20
    },
    {
      "type": "select",
      "id": "mobile_content_width",
      "label": "Content width",
      "options": [
        {
          "value": "small",
          "label": "Small (280px)"
        },
        {
          "value": "medium",
          "label": "Medium (340px)"
        },
        {
          "value": "large",
          "label": "Large (400px)"
        },
        {
          "value": "custom",
          "label": "Custom"
        }
      ],
      "default": "medium"
    },
    {
      "type": "range",
      "id": "mobile_custom_width",
      "min": 200,
      "max": 500,
      "step": 10,
      "unit": "px",
      "label": "Custom width",
      "default": 340
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Limited Time Offer"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Summer Sale"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Get up to 50% off on selected items. Don't miss out on this amazing opportunity!"
    },
    {
      "type": "header",
      "content": "Countdown timer"
    },
    {
      "type": "checkbox",
      "id": "show_countdown",
      "label": "Show countdown timer",
      "default": true
    },
    {
      "type": "text",
      "id": "countdown_target",
      "label": "Target date and time",
      "info": "Format: YYYY-MM-DD HH:MM:SS (e.g., 2025-12-31 23:59:59)"
    },
    {
      "type": "header",
      "content": "Desktop font sizes"
    },
    {
      "type": "range",
      "id": "desktop_subheading_size",
      "min": 12,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Subheading",
      "default": 16
    },
    {
      "type": "range",
      "id": "desktop_heading_size",
      "min": 24,
      "max": 80,
      "step": 2,
      "unit": "px",
      "label": "Main heading",
      "default": 48
    },
    {
      "type": "range",
      "id": "desktop_countdown_size",
      "min": 16,
      "max": 64,
      "step": 2,
      "unit": "px",
      "label": "Countdown timer",
      "default": 32
    },
    {
      "type": "range",
      "id": "desktop_description_size",
      "min": 12,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Description",
      "default": 18
    },
    {
      "type": "header",
      "content": "Mobile font sizes"
    },
    {
      "type": "range",
      "id": "mobile_subheading_size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Subheading",
      "default": 14
    },
    {
      "type": "range",
      "id": "mobile_heading_size",
      "min": 20,
      "max": 56,
      "step": 2,
      "unit": "px",
      "label": "Main heading",
      "default": 32
    },
    {
      "type": "range",
      "id": "mobile_countdown_size",
      "min": 14,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Countdown timer",
      "default": 24
    },
    {
      "type": "range",
      "id": "mobile_description_size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Description",
      "default": 16
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Main heading",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "countdown_color",
      "label": "Countdown timer",
      "default": "#ffdb00"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description",
      "default": "#ffffff"
    }
  ],
  "presets": [
    {
      "name": "Hero banner"
    }
  ]
}
{% endschema %}
