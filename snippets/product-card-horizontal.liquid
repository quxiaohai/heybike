{%- comment -%}
  Renders a product card

  Accepts:
  - product: {Object} The item to render
  - image_ratio: {String} Size of the product image card. Values are "square", "landscape" and "portrait". Default is "square" (optional)
  - image_fill: {Boolean} Zoom image to fill space. Default: false (optional)
  - show_vendor: {Boolean} Show the product vendor. Default: false
  - show_price: {Boolean} Show the product pricing. Default: false
  - show_quick_add: {Boolean} Show the quick add button.
  - show_quick_view: {Boolean} Show the quick view button.
  - product_id: {String} The ID of the current product.
  - section_id: {String} The ID of section to which this snippet belongs.
  - block_id: {String} The ID of block to which this snippet belongs.

  Usage:
  {% render 'product-card-horizontal', product: item %}
{%- endcomment -%}

<div class="horizontal-product flex items-center gap-4 md:gap-6 w-full">
  <a class="horizontal-product__media media media--{{ image_ratio }}{% unless image_fill %} media--contain{% endunless %} relative overflow-hidden shrink-0" href="{{ product.url }}" tabindex="-1">
    {%- liquid
      if product.featured_media
        echo product.featured_media | image_url: width: product.featured_media.width | image_tag: loading: 'lazy', widths: '180,360,540', is: 'lazy-image'
      else
        echo 'product-1' | placeholder_svg_tag
      endif
    -%}
  </a>
  <div class="horizontal-product__details flex flex-col justify-start gap-1d5">
    <div class="flex flex-col gap-1">
      <div class="block">
        <p class="vendor text-xs text-opacity">{{ product.vendor }}</p>
        <a href="{{ product.url }}" class="horizontal-product__title reversed-link font-medium text-base leading-tight">{{ product.title | escape }}</a>
      </div>
    </div>
    
    <div class="flex flex-col gap-1">
      {%- liquid
        if show_price
          render 'product-price', product: product, class: 'flex flex-wrap items-end gap-2 text-sm'
        endif
      -%}
    </div>
  </div>
  {%- if show_quick_add -%}
    <div class="horizontal-product__quantity shrink-0 text-sm sm:block">
      <div class="grid gap-3">
        {%- if product.available -%}
          {%- if product.variants.size == 1 -%}
            {%- form 'product', product, is: 'product-form' -%}
              <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" />
              <button type="submit" class="button button--primary button--small icon-with-text" is="hover-button" data-variant-id="{{ product.selected_or_first_available_variant.id }}" aria-label="{{ 'products.product.quick_add' | t | escape }}">
                <span class="btn-fill" data-fill></span>
                <span class="btn-text">
                  <svg class="icon icon-cart icon-lg" viewBox="0 0 24 24" stroke="currentColor" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M1 1h.5v0c.226 0 .339 0 .44.007a3 3 0 0 1 2.62 1.976c.034.095.065.204.127.42l.17.597m0 0 1.817 6.358c.475 1.664.713 2.496 1.198 3.114a4 4 0 0 0 1.633 1.231c.727.297 1.592.297 3.322.297h2.285c1.75 0 2.626 0 3.359-.302a4 4 0 0 0 1.64-1.253c.484-.627.715-1.472 1.175-3.161l.06-.221c.563-2.061.844-3.092.605-3.906a3 3 0 0 0-1.308-1.713C19.92 4 18.853 4 16.716 4H4.857ZM12 20a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm8 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"></path>
                  </svg>
                  
                  {% comment %}
                    {%- render 'icon', icon: 'plus', size: '2xs' -%}
                    <span class="hidden md:block" data-sold-out="{{ 'products.product.sold_out' | t | escape }}">
                      {{- 'products.product.quick_add' | t -}}
                    </span>
                  {% endcomment %}
                </span>
              </button>
            {%- endform -%}
          {%- else -%}
            {%- if show_quick_view -%}
              {%- capture quick_view_id -%}Quickview-{{ section_id }}{% if block_id != blank %}-{{ block_id }}{% endif %}-{{ product_id }}{%- endcapture -%}
              <button type="button" class="button button--primary button--small icon-with-text" is="hover-button" aria-controls="{{ quick_view_id }}" aria-expanded="false" aria-label="{{ 'products.product.quick_view' | t | escape }}">
                <span class="btn-fill" data-fill></span>
                <span class="btn-text">
                  <svg class="icon icon-cart icon-lg" viewBox="0 0 24 24" stroke="currentColor" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M1 1h.5v0c.226 0 .339 0 .44.007a3 3 0 0 1 2.62 1.976c.034.095.065.204.127.42l.17.597m0 0 1.817 6.358c.475 1.664.713 2.496 1.198 3.114a4 4 0 0 0 1.633 1.231c.727.297 1.592.297 3.322.297h2.285c1.75 0 2.626 0 3.359-.302a4 4 0 0 0 1.64-1.253c.484-.627.715-1.472 1.175-3.161l.06-.221c.563-2.061.844-3.092.605-3.906a3 3 0 0 0-1.308-1.713C19.92 4 18.853 4 16.716 4H4.857ZM12 20a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm8 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"></path>
                  </svg>
                  
                  {% comment %}
                    {%- render 'icon', icon: 'plus', size: '2xs' -%}
                    <span class="hidden md:block" data-sold-out="{{ 'products.product.sold_out' | t | escape }}">
                      {{- 'products.product.quick_view' | t -}}
                    </span>
                  {% endcomment %}
                </span>
              </button>
              <quick-view id="{{ quick_view_id }}" class="quick-view x-modal drawer z-40 fixed bottom-0 left-0 h-full w-full pointer-events-none" data-product-url="{{ product.url }}" role="dialog" aria-label="{{ 'products.product.choose_product_options' | t: product_name: product.title | escape }}" aria-modal="true" hidden>
                <overlay-element class="overlay fixed-modal invisible opacity-0 fixed bottom-0 left-0 w-full h-screen pointer-events-none" aria-controls="{{ quick_view_id }}" aria-expanded="false"></overlay-element>
                <div class="drawer__inner z-10 absolute top-0 flex flex-col w-full h-full overflow-hidden">
                  <gesture-element class="drawer__header flex justify-between opacity-0 invisible relative">
                    <button class="button button--secondary button--close drawer__close z-1 absolute top-0 right-0 flex items-center justify-center opacity-0" type="button" is="hover-button" aria-controls="{{ quick_view_id }}" aria-expanded="false" aria-label="{{ 'general.accessibility.close' | t | escape }}">
                      <span class="btn-fill" data-fill></span>
                      <span class="btn-text">
                        {%- render 'icon', icon: 'close', size: 'sm' -%}
                      </span>
                    </button>
                  </gesture-element>
                  <div class="quick-view__content drawer__content opacity-0 invisible flex flex-col h-full grow shrink"></div>
                </div>
              </quick-view>
            {%- else -%}
              <a href="{{ product.url }}" class="button button--primary button--small icon-with-text" is="hover-link" aria-label="{{ 'products.product.quick_view' | t | escape }}">
                <span class="btn-fill" data-fill></span>
                <span class="btn-text">
                  <svg class="icon icon-cart icon-lg" viewBox="0 0 24 24" stroke="currentColor" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M1 1h.5v0c.226 0 .339 0 .44.007a3 3 0 0 1 2.62 1.976c.034.095.065.204.127.42l.17.597m0 0 1.817 6.358c.475 1.664.713 2.496 1.198 3.114a4 4 0 0 0 1.633 1.231c.727.297 1.592.297 3.322.297h2.285c1.75 0 2.626 0 3.359-.302a4 4 0 0 0 1.64-1.253c.484-.627.715-1.472 1.175-3.161l.06-.221c.563-2.061.844-3.092.605-3.906a3 3 0 0 0-1.308-1.713C19.92 4 18.853 4 16.716 4H4.857ZM12 20a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm8 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"></path>
                  </svg>
                  
                  {% comment %}
                    {%- render 'icon', icon: 'plus', size: '2xs' -%}
                    <span class="hidden md:block" data-sold-out="{{ 'products.product.sold_out' | t | escape }}">
                      {{- 'products.product.quick_view' | t -}}
                    </span>
                  {% endcomment %}
                </span>
              </a>
            {%- endif -%}
          {%- endif -%}
        {%- else -%}
          <span class="button button--primary button--small" disabled="disabled">
            {{- 'products.product.sold_out' | t -}}
          </span>
        {%- endif -%}
      </div>
    </div>
  {%- endif -%}
</div>
